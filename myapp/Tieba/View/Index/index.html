<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>贴吧爆照</title>
    <link rel="stylesheet" href="__PUBLIC__/semantic/semantic.min.css">
    <link rel="stylesheet" href="__PUBLIC__/Lightbox/css/lightbox.min.css">
    <script src="__PUBLIC__/lib/js/jquery-3.1.1.min.js"></script>
    <script src="__PUBLIC__/semantic/semantic.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.2.6/vue.js"></script>
    <style type="text/css">
    .no-padding {
        padding: 0!important
    }

    .no-margin {
        margin: 0!important;
    }

    .footer {
        width: 100%;
        height: 15%
    }
    @media (max-width:749px){
        .hide-on-mobile{
          display: none!important;
}
    </style>
</head>

<body>
    <div id="shuaibi">
        <!-- 导航栏开始 -->
        <div class="ui menu navbar">
            <div class="ui container">
                <a href="#" class="item sidebar-trigger"><i class="sidebar icon"></i></a>
                <div class="item header">贴吧爆照</div>
                <div class="ui item fitted form">
                    <div class="field hide-on-mobile">
                        <select>
                            <option>直男吧</option>
                            <option>腿毛吧</option>
                            <option>运动白袜吧</option>
                            <option>肩上的脚丫吧</option>
                            <option>随便看看</option>
                        </select>
                    </div>
                </div>
                <div class="right menu hide-on-mobile">
                    <div class="item fitted ">
                        <form method="get" action="{:U('Tieba/Index/index')}" class="ui form">
                            <div class="fields no-margin">
                                <div class="field ">
                                    <select name="searchType" v-model="searchType">
                                        <option v-for="(typeName,type) in searchTypes" :value="type">{{typeName}}</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <div class="ui action left icon input">
                                        <i class="icon search"></i>
                                        <input type="text" :placeholder="searchBoxPlaceHolder" name="keywords" id="searchKeywords" v-model="keywords">
                                        <button class="ui button " id="searchBtn" type="submit">搜索</button>
                                    </div>
                                </div>
                            </div>
                        </form action="post">
                    </div>
                </div>
            </div>
        </div>
        <!-- 导航栏结束 -->
        <!-- 侧边栏导航开始 -->
        <div class="ui vertical menu sidebar">
            <div class="ui container">
                <div class="item header">贴吧爆照<i class="icon remove right" id="removeSidebar"></i></div>
                <form method="get" action="{:U('Tieba/Index/index')}" class="ui form">
                    <div class="ui item form">
                        <div class="field">
                            <select>
                                <option>直男吧</option>
                                <option>腿毛吧</option>
                                <option>运动白袜吧</option>
                                <option>肩上的脚丫吧</option>
                                <option>随便看看</option>
                            </select>
                        </div>
                    </div>
                    <!-- <div class="fields no-margin"> -->
                    <div class="field item">
                        <label for="">搜索类型：</label>
                        <select name="searchType" v-model="searchType">
                            <option v-for="(typeName,type) in searchTypes" :value="type">{{typeName}}</option>
                        </select>
                    </div>
                    <div class="field item">
                        <div class="ui action left icon input">
                            <i class="icon search"></i>
                            <input type="text" :placeholder="searchBoxPlaceHolder" name="keywords" id="searchKeywords" v-model="keywords">
                        </div>
                    </div>
                    <div class="item">
                        <button class="ui button " id="searchBtn" type="submit">搜索</button>
                    </div>
                    <!-- </div> -->
                </form>
            </div>
        </div>
        <!-- 侧边栏导航结束 -->
        <div class="ui container pusher">
            <div class="ui five stackable cards">
                <foreach name="data" item="one">
                    <div class="ui card">
                        <div class="image">
                            <php>
                                $urlArr=explode('/',explode('.',explode('=',$one['original_url'])[1])[0]); $fileName=$urlArr[count($urlArr)-1]; $url="http://tieba.baidu.com/photo/p?kw=${urlencode($one['forum_name'])}&flux=1&tid=${one['thread_id']}&pic_id=${fileName}&pn=1&fp=1&see_lz=1";
                            </php>
                            <img class="ui tiny image" src="{$one.file_name}">
                        </div>
                        <div class="content">
                            <a class="header" href="{:U('Tieba/Index/index',['searchType'=>'userName','keywords'=>$one['user_name']])}">{$one.user_name}</a>
                            <div class="meta">
                                {$one.timestamp}
                            </div>
                            <div class="description">
                                <i class="talk outline icon"></i> 发表在
                                <a href="{:U('Tieba/Index/thread',['tid'=>$one['thread_id']])}" target="_blank">{$one.forum_name}</a>吧
                            </div>
                        </div>
                        <div class="extra content">
                            <a href="{$url}" target="_blank">查看原图</a>
                            <!--             <div class="ui large transparent left icon input">
                                <i class="heart outline icon"></i>
                                <input type="text" placeholder="Add Comment...">
                            </div> -->
                        </div>
                    </div>
                </foreach>
            </div>
            {$pageCode}
        </div>
    </div>
    <div class="footer">
    </div>
    <script>
    var myapp = new Vue({
        el: '#shuaibi',
        data: {
            searchType: 'userName',
            searchTypes: {
                'userName': '用户名',
                'userId': '用户数字ID',
                'content': '发帖'
            },
            keywords: ''
        },
        computed: {
            searchBoxPlaceHolder: function() {
                return '搜索' + this.searchTypes[this.searchType]
            }
        }
    })
    $('.sidebar-trigger').on('click', function() {
        $('.sidebar').toggleClass('visible')
    })
    $('#removeSidebar').on('click', function() {
        $('.sidebar').removeClass('visible')
    })
    </script>
</body>

</html>